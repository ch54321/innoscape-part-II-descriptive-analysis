```{r, echo=FALSE}

# Input panels for indicator, industry and year 
  radioButtons("variable_exp", "Choose a variable",
               choices = list("Values in millions USD"="val_export", 
                              "% in Destination Exports"="share_in_tot",
                              "% in Industry Exports"="share_in_tot2"),
                                selected = "val_export", inline = T)

  sliderInput("year", "Year", min=1990, max=2019, value=2000, sep="")
  


  renderPlotly({

# subset the data accoding to the input:
    d_exp <- reactive({volumes %>%
                    filter(variable %in% input$variable_exp,
                           year %in% input$year)
    }) 

# make the plot
  ggplotly(  
            ggplot() +
              geom_polygon_interactive(data = map_world,
                           aes(long, lat, group = group, fill = region), 
                           show.legend = FALSE,
                           alpha = 0.4,
                           fill= value,
                           color = "white") +
              # geom_curve(data = d_exp(),
              #            aes(x = long_rep, xend = long_par,
              #                y = lat_rep, yend = lat_par),
              #            curvature = 0.1,
              #            col="turquoise2",
              #            size = 0.10,
              #            alpha = 0.5) +
              # geom_point(data = d_exp(),
              #            aes(long_par, lat_par, size = value, label = Country), color = "chocolate1",alpha = 0.5) +
              theme_bw() +
              theme(axis.line = element_blank(),
                    panel.grid.major = element_blank(),
                    panel.grid.minor = element_blank(),
                    panel.background = element_blank(),
                    panel.border = element_blank(),
                    axis.ticks = element_blank(),
                    axis.title = element_blank(),
                    axis.text = element_blank()),
            dynamicTicks = T, tooltip = c("label")
      )
    
  })

```

