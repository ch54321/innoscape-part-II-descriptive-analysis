```{r, echo=FALSE}
# Input panels for indicator, industry and year 
  radioButtons(inputId = "variable_exp", label = "Choose a variable",
               choices = list("in million USD"="val_export", 
                              "% of total Swiss exports to the destination"="share_in_tot",
                              "% of total Swiss pharma exports"="share_in_tot2"),
                                selected = "val_export", inline = T)
  sliderInput(inputId =  "year_exp", label = "Year", min=1990, max=2019, step = 1, value=2000, sep="")
  
# Create world map
  world <- ggplot() +
              geom_polygon(data = map_world,
                           aes(long, lat, group = group, 
                               fill = region), 
                           show.legend = FALSE,
                           alpha = 1,
                           fill="#D1E5F0",
                           color = "white") 
  renderPlotly({
# subset the data accoding to the input:
    d_exp <- reactive({volumes %>%
                    filter(variable %in% input$variable_exp,
                           year %in% input$year_exp)
    }) 
# make the plot
p <-  ggplotly(  world  +
              # geom_curve(data = d_exp(), 
              #            aes(x = long_rep, xend = long_par,
              #                y = lat_rep, yend = lat_par),
              #            curvature = 0.1, 
              #            col="turquoise2", 
              #            size = 0.10,
              #            alpha = 0.5) +
              geom_point(data = d_exp(),
                         aes(long_par, lat_par, size = value, label = Country), color = "#B2182B", alpha = 0.7) +
              theme_bw() +
              theme(axis.line = element_blank(),
                    panel.grid.major = element_blank(),
                    panel.grid.minor = element_blank(),
                    panel.background = element_blank(),
                    panel.border = element_blank(),
                    axis.ticks = element_blank(),
                    axis.title = element_blank(),
                    axis.text = element_blank()),
            dynamicTicks = T, tooltip = c("Country")
      ) %>% config(displayModeBar = T) %>%
      layout(xaxis = list(fixedrange = F), yaxis = list(fixedrange = F))

p$x$data[[1]]$text <- c(paste0("Please move over a point to get information"))
p$y$data[[1]]$text <- c(paste0("Please move over a point to get information"))

p

  })
```
